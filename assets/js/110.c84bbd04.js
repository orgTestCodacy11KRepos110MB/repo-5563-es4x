(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{532:function(e,s,n){"use strict";n.r(s);var t=n(56),a=Object(t.a)({},(function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"политика-безопасности"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#политика-безопасности"}},[e._v("#")]),e._v(" Политика безопасности")]),e._v(" "),n("p",[e._v('ES4X позволяет запускать приложения в абсолютно безопасных "песочницах". как и '),n("a",{attrs:{href:"https://deno.land/",target:"_blank",rel:"noopener noreferrer"}},[e._v("deno"),n("OutboundLink")],1),e._v(", ES4X может\nизолировать приложения, для этих целей используется "),n("a",{attrs:{href:"https://docs.oracle.com/javase/tutorial/essential/environment/security.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("менеджер безопасности"),n("OutboundLink")],1),e._v(" JVM.\nРанее менеджеры безопасности изолировали "),n("code",[e._v("Applet")]),e._v(" от доступа к хост-машине. Они более многогранные, чем то, что сейчас\nпредлагает "),n("code",[e._v("deno")]),e._v(".")]),e._v(" "),n("h2",{attrs:{id:"создание-security-policy"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#создание-security-policy"}},[e._v("#")]),e._v(" Создание security.policy")]),e._v(" "),n("p",[e._v("Чтобы создать политику безопасности, запустите утилиту "),n("code",[e._v("es4x")]),e._v(":")]),e._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[e._v("$ es4x security-policy\n\nСоздание нового файла "),n("span",{pre:!0,attrs:{class:"token string"}},[e._v("'security.policy'")]),e._v(" с полным доступом к сети\nи доступом только на чтение к рабочей директории\n\n")])])]),n("p",[e._v("Созданный файл представляет собой простой шаблон, внутри которого вы можете найти следующее:")]),e._v(" "),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('// Предоставляем следующие разрешения коду, который будет запущен из директории\n// node_modules/.lib/*\ngrant codeBase "file:\\${user.dir}\\${/}node_modules\\${/}.lib\\${/}*" {\n  // Для vert.x требуется полный доступ к директории temp.\n  permission java.io.FilePermission "\\${java.io.tmpdir}\\${/}-", "read,write,delete";\n\n  // Коду необходимо читать библиотеки среды выполнения JVM/GraalVM\n  permission java.io.FilePermission "\\${java.home}", "read";\n  permission java.io.FilePermission "\\${java.home}\\${/}..\\${/}release", "read";\n  permission java.io.FilePermission "\\${java.home}\\${/}-", "read";\n\n  // Приложению нужно читать все файлы из CWD\n  permission java.io.FilePermission "\\${user.dir}\\${/}-", "read";\n  // uncomment the following to allow full read access\n  //permission java.io.FilePermission "&lt;&lt;ALL FILES>>", "read";\n\n  // Netty нуждается в некоторых разрешениях на рефлексию\n  permission java.lang.reflect.ReflectPermission "suppressAccessChecks";\n\n  // По умолчанию мы предоставляем все разрешения времени выполнения\n  // Пользователи могут ограничить их в дальнейшем, например\n  // ограничить доступ к переменным среды окружения и т.д.\n  permission java.lang.RuntimePermission "*";\n\n  // ES4X устанавливает более приятный логгер\n  permission java.util.logging.LoggingPermission "control";\n\n  // Предоставляем полный доступ к системным свойствам JVM\n  permission java.util.PropertyPermission "*", "read,write";\n\n  // В текущий момент мы предоставляем полный доступ к сети\n  permission java.net.SocketPermission "*", "accept,connect,listen,resolve";\n};\n')])])]),n("p",[e._v("Таким образом, этот шаблон дает полный доступ к сети и доступ на чтение ко всем файлам из "),n("code",[e._v("CWD")]),e._v(",\nоткуда было запущено приложение.")]),e._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),n("p",[e._v("Зная, какие ограничения требуются для вашего приложения, вы можете ограничивать права сильнее!")])]),e._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),n("p",[e._v("Несмотря на то, что шаблон выглядит достаточно неплохим для работы, нужно помнить, что доступ к "),n("code",[e._v("CWD")]),e._v(" только на чтение,\nтак что если ваше приложение запущено, и http-сервер загружает файл, данная запись приведет к ошибке, если только запись\nне будет вестись в директорию "),n("code",[e._v("$TEMP")]),e._v(".")])])])}),[],!1,null,null,null);s.default=a.exports}}]);